# C++ KZG Ceremony Client

![Checks](https://github.com/PatriceVignola/cpp-kzg-ceremony-client/actions/workflows/checks.yml/badge.svg)
![Windows CI](https://github.com/PatriceVignola/cpp-kzg-ceremony-client/actions/workflows/windows-ci.yml/badge.svg)
![Darwin CI](https://github.com/PatriceVignola/cpp-kzg-ceremony-client/actions/workflows/darwin-ci.yml/badge.svg)
![Ubuntu CI](https://github.com/PatriceVignola/cpp-kzg-ceremony-client/actions/workflows/ubuntu-ci.yml/badge.svg)
![Alpine CI](https://github.com/PatriceVignola/cpp-kzg-ceremony-client/actions/workflows/alpine-ci.yml/badge.svg)

The C++ KZG Ceremony Client (or CKCC) is a fully-featured client for Ethereum's KZG Ceremony.

## What is the KZG Ceremony?

The KZG Ceremony is a way for all Ethereum users to help scale Ethereum (i.e. EIP-4844, aka Proto-Danksharding) by adding to the credibility that nobody knows what the final secret is. In other words, the ceremony is secure as long as at least one honest person using one honest client (i.e. a client without bugs or undesired behavior) contributes. The more people contribute and the more diverse the set of clients is, higher are the chances that the ceremony is secure.

For more information, take a look at the [FAQ](https://github.com/ethereum/kzg-ceremony/blob/main/FAQ.md).

## Why C++?

Multiple clients for the Go, Rust and Java languages already exist, but I haven't seen a C++ client yet. For the sake of client and language diversity, I decided to build a C++ client. A diverse set of clients, languages and libraries adds to the robustness of the ceremony.

## Features

- Supports Windows, Mac and a wide range of Linux distributions from the last 10 years
- Supports Ethereum and GitHub accounts
- BLS signing
- ECDSA signing for Ethereum accounts
- Failure tolerant; while waiting for a contribution slot, the client will retry many times and even attempt to automatically re-authenticate when the session expires or when connection problems occur.
- Transcript verification
- Contribution verification
- Multiple layers of entropy for secret generation; in addition to the user's seed phrase, the secret generator will use the platform's CSPRNG (Cryptographically Secure PseudoRandom Number Generator) to improve entropy.
- All generated secrets in a contribution are unique
- Completely automated; while some clients need to the user to perform manual steps like opening their browser and copying some values back to the app, CKCC automatically opens the browser for each step and directs the user to the next step. The only manual step that the user needs to perform is to login through their GitHub or Ethereum account.

## Usage

1. Download the executable from the [releases page](https://github.com/PatriceVignola/cpp-kzg-ceremony-client/releases)
2. Run the exeutable: `./cpp-kzg-ceremony-client --entropy=<sentence_of_your_choosing>`

More command-line options are also available:

```
  ______   __    __   ______    ______
 /      \ |  \  /  \ /      \  /      \
|  $$$$$$\| $$ /  $$|  $$$$$$\|  $$$$$$\
| $$   \$$| $$/  $$ | $$   \$$| $$   \$$
| $$      | $$  $$  | $$      | $$
| $$   __ | $$$$$\  | $$   __ | $$   __
| $$__/  \| $$ \$$\ | $$__/  \| $$__/  \
 \$$    $$| $$  \$$\ \$$    $$ \$$    $$
  \$$$$$$  \$$   \$$  \$$$$$$   \$$$$$$

C++ KZG Ceremony Client

Usage:
  ./build/bin/cpp-kzg-ceremony-client [OPTION...]

  -s, --sequencer arg  URL of the sequencer to use (default:
                       https://seq.ceremony.ethereum.org)
  -a, --auth arg       Authentication provider to use. Choices: [ethereum,
                       github] (default: ethereum)
  -e, --entropy arg    A phrase to initialize the entropy. Can be any
                       length, but will be truncated or padded to 256
                       characters depending on the length. This phrase will
                       be fed more randomness before a secret is generated,
                       so it does not already need to random.
  -n, --no-signing     Disable the signing of the contribution. Although
                       signing contributions is not mandatory, it is
                       recommended to verify that the contributions listed
                       in the transcript are actually generated by the
                       addresses listed.
  -h, --help           Print usage
```

## Build from source

1. Clone the repo
2. Download CMake
3. Run `./build.sh` on Linux or `.\build.bat` on Windows

## Dependencies

- [jarro2783/cxxopts](https://github.com/jarro2783/cxxopts) for command-line arguments parsing
- [Corvusoft/restbed](https://github.com/Corvusoft/restbed) for the local HTTP server
- [libcpr/cpr](https://github.com/libcpr/cpr) for the HTTP client
- [nlohmann/json](https://github.com/nlohmann/json) for JSON serialization and deserialization
- [tristanpenman/valijson](https://github.com/tristanpenman/valijson) for JSON schema validation
- [supranational/blst](https://github.com/supranational/blst) for BLS signing and powers of tau functionality
- [Duthomhas/CSPRNG](https://github.com/Duthomhas/CSPRNG) for easy cross-platform CSPRNG
